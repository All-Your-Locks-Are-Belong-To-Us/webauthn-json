!function(){var t=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r=u;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?d:h,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",h="suspendedYield",f="executing",d="completed",p={};function g(){}function v(){}function m(){}var y={};y[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==n&&r.call(w,i)&&(y=w);var x=m.prototype=g.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function L(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:S}}function S(){return{value:e,done:!0}}return v.prototype=x.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}({});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}function e(t){const e="==".slice(0,(4-t.length%4)%4),n=t.replace(/-/g,"+").replace(/_/g,"/")+e,r=atob(n),o=new ArrayBuffer(r.length),i=new Uint8Array(o);for(let t=0;t<r.length;t++)i[t]=r.charCodeAt(t);return o}function n(t){const e=new Uint8Array(t);let n="";for(const t of e)n+=String.fromCharCode(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const r="copy",o="convert";function i(t,e,n){if(e===r)return n;if(e===o)return t(n);if(e instanceof Array)return n.map(n=>i(t,e[0],n));if(e instanceof Object){const r={};for(const[o,a]of Object.entries(e))if(o in n)null!=n[o]?r[o]=i(t,a.schema,n[o]):r[o]=null;else if(a.required)throw new Error(`Missing key: ${o}`);return r}}function a(t){return{required:!0,schema:t}}function s(t){return{required:!1,schema:t}}const c={type:a(r),id:a(o),transports:s(r)},l={appid:s(r),appidExclude:s(r)},u={appid:s(r),appidExclude:s(r)},h={publicKey:a({rp:a(r),user:a({id:a(o),name:a(r),displayName:a(r)}),challenge:a(o),pubKeyCredParams:a(r),timeout:s(r),excludeCredentials:s([c]),authenticatorSelection:s(r),attestation:s(r),extensions:s(l)}),signal:s(r)},f={type:a(r),id:a(r),rawId:a(o),response:a({clientDataJSON:a(o),attestationObject:a(o)}),clientExtensionResults:a(u)},d={mediation:s(r),publicKey:a({challenge:a(o),timeout:s(r),rpId:s(r),allowCredentials:s([c]),userVerification:s(r),extensions:s(l)}),signal:s(r)},p={type:a(r),id:a(r),rawId:a(o),response:a({clientDataJSON:a(o),authenticatorData:a(o),signature:a(o),userHandle:a(o)}),clientExtensionResults:a(u)};var g,v,m={},y=m={};function b(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}function x(t){if(g===setTimeout)return setTimeout(t,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(t,0);try{return g(t,0)}catch(e){try{return g.call(null,t,0)}catch(e){return g.call(this,t,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch(t){g=b}try{v="function"==typeof clearTimeout?clearTimeout:w}catch(t){v=w}}();var C,E=[],L=!1,A=-1;function k(){L&&C&&(L=!1,C.length?E=C.concat(E):A=-1,E.length&&O())}function O(){if(!L){var t=x(k);L=!0;for(var e=E.length;e;){for(C=E,E=[];++A<e;)C&&C[A].run();A=-1,e=E.length}C=null,L=!1,function(t){if(v===clearTimeout)return clearTimeout(t);if((v===w||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(t);try{v(t)}catch(e){try{return v.call(null,t)}catch(e){return v.call(this,t)}}}(t)}}function T(t,e){this.fun=t,this.array=e}function S(){}function W(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function N(t,e){for(var n,r="",o=0,i=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)n=t.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",o=0):o=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),i=s,a=0;continue}}else if(2===r.length||1===r.length){r="",o=0,i=s,a=0;continue}e&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+="/"+t.slice(i+1,s):r=t.slice(i+1,s),o=s-i-1;i=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}y.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];E.push(new T(t,e)),1!==E.length||L||x(O)},T.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=S,y.addListener=S,y.once=S,y.off=S,y.removeListener=S,y.removeAllListeners=S,y.emit=S,y.prependListener=S,y.prependOnceListener=S,y.listeners=function(t){return[]},y.binding=function(t){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(t){throw new Error("process.chdir is not supported")},y.umask=function(){return 0};var _,j,B={resolve:function(){for(var t,e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var o;r>=0?o=arguments[r]:(void 0===t&&(t=m.cwd()),o=t),W(o),0!==o.length&&(e=o+"/"+e,n=47===o.charCodeAt(0))}return e=N(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(W(t),0===t.length)return".";var e=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=N(t,!e)).length||e||(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return W(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];W(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":B.normalize(t)},relative:function(t,e){if(W(t),W(e),t===e)return"";if((t=B.resolve(t))===(e=B.resolve(e)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var r=t.length,o=r-n,i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length-i,s=o<a?o:a,c=-1,l=0;l<=s;++l){if(l===s){if(a>s){if(47===e.charCodeAt(i+l))return e.slice(i+l+1);if(0===l)return e.slice(i+l)}else o>s&&(47===t.charCodeAt(n+l)?c=l:0===l&&(c=0));break}var u=t.charCodeAt(n+l);if(u!==e.charCodeAt(i+l))break;47===u&&(c=l)}var h="";for(l=n+c+1;l<=r;++l)l!==r&&47!==t.charCodeAt(l)||(0===h.length?h+="..":h+="/..");return h.length>0?h+e.slice(i+c):(i+=c,47===e.charCodeAt(i)&&++i,e.slice(i))},_makeLong:function(t){return t},dirname:function(t){if(W(t),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,o=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":t.slice(0,r)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');W(t);var n,r=0,o=-1,i=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,s=-1;for(n=t.length-1;n>=0;--n){var c=t.charCodeAt(n);if(47===c){if(!i){r=n+1;break}}else-1===s&&(i=!1,s=n+1),a>=0&&(c===e.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=s))}return r===o?o=s:-1===o&&(o=t.length),t.slice(r,o)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!i){r=n+1;break}}else-1===o&&(i=!1,o=n+1);return-1===o?"":t.slice(r,o)},extname:function(t){W(t);for(var e=-1,n=0,r=-1,o=!0,i=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===e?e=a:1!==i&&(i=1):-1!==e&&(i=-1);else if(!o){n=a+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===n+1?"":t.slice(e,r)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}("/",t)},parse:function(t){W(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var n,r=t.charCodeAt(0),o=47===r;o?(e.root="/",n=1):n=0;for(var i=-1,a=0,s=-1,c=!0,l=t.length-1,u=0;l>=n;--l)if(47!==(r=t.charCodeAt(l)))-1===s&&(c=!1,s=l+1),46===r?-1===i?i=l:1!==u&&(u=1):-1!==i&&(u=-1);else if(!c){a=l+1;break}return-1===i||-1===s||0===u||1===u&&i===s-1&&i===a+1?-1!==s&&(e.base=e.name=0===a&&o?t.slice(1,s):t.slice(a,s)):(0===a&&o?(e.name=t.slice(1,i),e.base=t.slice(1,s)):(e.name=t.slice(a,i),e.base=t.slice(a,s)),e.ext=t.slice(i,s)),a>0?e.dir=t.slice(0,a-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};B.posix=B;const R=":host {\n  position: absolute;\n  top: 2em;\n  left: 2em;\n  right: 2em;\n  bottom: 2em;\n  box-sizing: border-box;\n  font-family: sans-serif;\n  box-shadow: 0 0 1em 2em rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  resize: both;\n\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(0.5em);\n  -webkit-backdrop-filter: blur(4px);\n  z-index: 1000000;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  padding: 1em;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-rows: auto auto 1fr;\n}\n\n.header {\n  text-align: center;\n}\n\ntextarea {\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n}\n\n.success textarea {\n  background: rgba(0, 255, 0, 0.5);\n}\n\n.failure textarea {\n  background: rgba(255, 0, 0, 0.25);\n}\n\n.controls {\n  text-align: center;\n  align-items: center;\n  margin: 0.5em;\n  gap: 0.5em;\n}\n\nbutton {\n  margin-right: 0.5em;\n}\n",G=null===(_=navigator.credentials)||void 0===_?void 0:_.create.bind(navigator.credentials),J=null===(j=navigator.credentials)||void 0===j?void 0:j.get.bind(navigator.credentials);navigator.credentials||(navigator.credentials={});class I extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"closed"});const t=document.createElement("style");t.textContent=R,this.shadow.appendChild(t),this.contentWrapper=document.createElement("div"),this.contentWrapper.classList.add("wrapper"),this.shadow.appendChild(this.contentWrapper),this.header=document.createElement("div"),this.header.textContent="WebAuthn Request",this.header.classList.add("header"),this.contentWrapper.appendChild(this.header),this.controls=document.createElement("div"),this.controls.classList.add("controls"),this.contentWrapper.appendChild(this.controls),this.textareaWrapper=document.createElement("div"),this.textareaWrapper.classList.add("textarea-wrapper"),this.contentWrapper.appendChild(this.textareaWrapper),this.textarea=document.createElement("textarea"),this.textareaWrapper.appendChild(this.textarea),this.closeButton=document.createElement("button"),this.closeButton.textContent="Close",this.closeButton.addEventListener("click",()=>{document.body.removeChild(this),this.close&&this.close()}),this.controls.appendChild(this.closeButton);const e=document.createElement("button");e.textContent="Copy JSON",e.addEventListener("click",()=>{navigator.clipboard.writeText(this.textarea.value),e.textContent="Copied!",setTimeout(()=>{e.textContent="Copy JSON"},1e3)}),this.controls.appendChild(e),document.body.appendChild(this)}async create(t){return new Promise((r,o)=>{this.close=()=>{o("WebAuthn inspector closed")};const a=i(n,h,t);this.header.textContent="WebAuthn Create Request",this.textarea.value=JSON.stringify(a,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Create",this.opButton.addEventListener("click",async()=>{try{const t=function(t){return i(e,h,t)}(JSON.parse(this.textarea.value)),o=await G(t);this.success("Create",function(t){const e=t;return e.clientExtensionResults=t.getClientExtensionResults(),i(n,f,e)}(o)),this.closeButton.textContent="Respond",this.close=()=>{r(o)}}catch(t){this.failure("Create",t),this.close=()=>{o(t)}}}),this.controls.appendChild(this.opButton)})}async get(t){return new Promise((r,o)=>{this.close=()=>{o("WebAuthn inspector closed")};const a=i(n,d,t);this.header.textContent="WebAuthn Get Request",this.textarea.value=JSON.stringify(a,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Get",this.opButton.addEventListener("click",async()=>{try{const t=function(t){return i(e,d,t)}(JSON.parse(this.textarea.value));console.log(t);const o=await J(t);this.success("Get",function(t){const e=t;return e.clientExtensionResults=t.getClientExtensionResults(),i(n,p,e)}(o)),this.closeButton.textContent="Respond",this.close=()=>{r(o)}}catch(t){this.failure("Get",t),this.close=()=>{o(t)}}}),this.controls.appendChild(this.opButton)})}success(t,e){this.controls.removeChild(this.opButton),this.header.textContent=`✅ WebAuthn ${t} Response`,this.contentWrapper.classList.add("success"),this.textarea.value=JSON.stringify(e,null,"  ")}failure(t,e){this.controls.removeChild(this.opButton),this.header.textContent=`❌ WebAuthn ${t} Response`,this.contentWrapper.classList.add("failure"),this.textarea.value=e.toString()}}customElements.define("webauthn-inspector",I),navigator.credentials.create=async function(t){console.log(t);const e=new I;return await e.create(t)},navigator.credentials.get=async function(t){const e=new I;return await e.get(t)},console.log("WebAuthn Inspector is active!")}();
//# sourceMappingURL=webauthn-json-inspector.js.map
